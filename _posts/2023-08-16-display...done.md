---
layout: post
title:  "Display ... done"
date:   2023-08-16 10:00:00 +0100
---

![2023-08-16-display...done](/assets/2023-08-16-display...done.png)

the display is a 4.3" TFT LCD ( `ER-TFT043A2-3` ) with a resolution of 480×272px, 24Bit colors. it is connected via a 40-pin FPC connector and features a capacitive touch surface ( interfaced via an `‌FT5206` I2C-based controller ) and dimmable a backlight ( via `CAT4139‌` + PWM ).

the display is interfaced with the CPU via a parallel LTDC interface.

- [ER-TFT043A2-3 4.3 inch TFT LCD 480x270 Pixels Display Datasheet](https://www.buydisplay.com/download/manual/ER-TFT043A2-3_Datasheet.pdf)
- [FT5206](https://www.buydisplay.com/download/ic/FT5206.pdf)
- [CAT4139TD-GT3](https://www.onsemi.com/products/power-management/led-drivers/dc-dc-led-drivers/cat4139)

## about touch panel interface

it took me some time to realize that despite my earlier assumptions, the capacitive touch panel does not require an external driver, unlike a resisitive touch panel, but uses the 4 pins that are otherwised reserved for resisitive touch panel interaction ( `RESIST.` ) for the on-board driver chip `FT5206` which communicates via I2C ( `SDA` + `SCL` ) with the MCU. the mapping is not documented in the display’s datasheet but it looks like this:

| # | FT5206 | RESIST. | FPC40 | 
|---|--------|---------|-------|
| 1 | SDA    | YU      | 40    |
| 2 | SCL    | XL      | 39    |
| 3 | RST    | YD      | 38    |
| 4 | INT    | XR      | 37    |
| 5 | GND    | GND     | 36    |
| 6 | VDD    | NC      | 35    |

i also realized that driver chip is powered by the power pin locate on position 4 on the FPC40 connector

in summary this is quite a nice revelation because most resisitve touch panel driver require a chip that connect via SPI. this extra bus i can save now and i am even considering using the same I2C bus that i also allocated for the audio codec thus freeing up some GPIO pins.

## about the connector

and a word of warning: i found out that there are 3 types of FPC connectors. those that connect on top, bottom and both sides. this is quite crucial for the design of the PCB. oftentimes the brown flat flexible cable is folded under the display and attached to the PCB together with the display i.e on the same side as the connector. this would then require a botton-connected FPC connector. occasionally, the cable is threaded through a hole in the PCB or over the PCB’s edge and then connected on the backside of the PCB. such a design would then require a top-connected FPC connector. however, i probably stick with the former.

party knowledge: FPC stands for *flexible printed circuit* and FFC for *flat flex cable* both terms are often used interchangably. the cables are often made from brown *polyimide* as a product by DuPont also called *Kapton*.